<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
  <!-- ================================================
       Alias para familias genéricas de fuentes
       ================================================ -->
  <!-- Monospace: Preferida para terminales y código.
       Prioriza Nerd Font con glyphs para iconos y powerline. -->
  <alias>
    <family>monospace</family>
    <prefer>
      <family>RecMonoSmCasual Nerd Font Mono</family>
      <family>Liberation Mono</family>
    </prefer>
  </alias>
  <!-- Serif: Para texto con remates, documentos y lectura prolongada. -->
  <alias>
    <family>serif</family>
    <prefer>
      <family>IBM Plex Serif</family>
    </prefer>
  </alias>
  <!-- Sans-serif: Para interfaces, web y texto general moderno. -->
  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>UbuntuSans Nerd Font</family>
    </prefer>
  </alias>
  <!-- Emoji: Familia genérica para emojis en color (Unicode).
       Recomendado por múltiples guías para asegurar soporte global. -->
  <alias>
    <family>emoji</family>
    <prefer>
      <family>Noto Color Emoji</family>
    </prefer>
  </alias>
  <!-- ================================================
       Reglas por idioma / script
       ================================================ -->
  <!-- Fuentes CJK para japonés (ja). Prepende Noto Sans CJK JP
       para cubrir caracteres correctamente sin fallbacks indeseados. -->
  <match>
    <test compare="contains" name="lang">
      <string>ja</string>
    </test>
    <edit mode="prepend" name="family">
      <string>Noto Sans CJK JP</string>
    </edit>
  </match>
  <!-- ================================================
       Configuración global de renderizado
       ================================================ -->
  <match target="font">
    <!-- Antialiasing: Suavizado de bordes en fuentes escalables.
         Siempre activado en sistemas modernos para mejor calidad. -->
    <edit mode="assign" name="antialias">
      <bool>true</bool>
    </edit>
    <!-- Hinting: Ajuste de píxeles para alinear con la cuadrícula.
         Activado para mejorar nitidez en tamaños pequeños/medianos. -->
    <edit mode="assign" name="hinting">
      <bool>true</bool>
    </edit>
    <!-- Estilo de hinting: Moderado, equilibra nitidez y naturalidad.
         Opciones: hintnone, hintslight, hintmedium, hintfull. -->
    <edit mode="assign" name="hintstyle">
      <const>hintmedium</const>
    </edit>
    <!-- Subpixel: Orden RGB para paneles IPS horizontales estándar. -->
    <edit mode="assign" name="rgba">
      <const>rgb</const>
    </edit>
    <!-- Filtro LCD: Mejora la claridad en renderizado subpíxel.
         lcddefault es el valor equilibrado recomendado por defecto. -->
    <edit mode="assign" name="lcdfilter">
      <const>lcddefault</const>
    </edit>
    <!-- Deshabilitar embedded bitmaps globalmente.
         Evita que fuentes como Calibri/Cambria usen bitmaps feos en tamaños pequeños.
         Recomendado por Arch Wiki y foros (2023-2025). Nota: rompe bitmaps en emojis
         si no se maneja con alias separado, pero Noto Color Emoji funciona bien sin ellos. -->
    <edit mode="assign" name="embeddedbitmap">
      <bool>false</bool>
    </edit>
    <!-- Autohint como respaldo: Útil si el hinting nativo (Patman) no está disponible
         o falla en ciertas fuentes. Agrega algo de mejora en legibilidad. -->
    <edit mode="assign" name="autohint">
      <bool>true</bool>
    </edit>
  </match>
  <!-- ================================================
       Ajustes condicionales por propiedades de fuente
       ================================================ -->
  <!-- Para fuentes con peso > medium (negritas fuertes):
       Desactiva hinting para evitar distorsiones y usa filtro más ligero. -->
  <match target="font">
    <test compare="more" name="weight">
      <const>medium</const>
    </test>
    <edit mode="assign" name="hintstyle">
      <const>hintnone</const>
    </edit>
    <edit mode="assign" name="lcdfilter">
      <const>lcdlight</const>
    </edit>
  </match>
</fontconfig>
