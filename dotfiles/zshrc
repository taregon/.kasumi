# Habilitar profiling
zmodload zsh/zprof
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
# â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
#   â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
#  â–ˆâ–ˆâ–ˆâ•”â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
# â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# POWERLEVEL10K INSTANT PROMPT
# Este bloque debe estar cerca del inicio de ~/.zshrc para
# que el prompt se cargue lo antes posible al abrir la terminal.
# NOTA: cualquier cÃ³digo que requiera interacciÃ³n de usuario
# (passwords, confirmaciones [y/n], etc.) debe ir **antes** de este bloque.
#
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
    source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ZINIT BOOTSTRAP
# ConfiguraciÃ³n inicial de Zinit: instala el gestor si no existe
# y lo deja listo para cargar plugins.
#
ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"
[ ! -d $ZINIT_HOME ] && mkdir -p "$(dirname $ZINIT_HOME)"
[ ! -d $ZINIT_HOME/.git ] && git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
source "${ZINIT_HOME}/zinit.zsh"
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# CONFIGURACIÃ“N PERSONAL
# Definir ruta base para archivos de configuraciÃ³n adicionales
local ZSH_CONF=~/.config/zsh

# CARGAR ALIAS
source $ZSH_CONF/kasumi-zsh_alias.zsh

# CARGAR FUNCIONES (anterior mÃ©todo)
# source $ZSH_CONF/funcs/kasumi-zsh_functions.zsh

# DIRECTORIOS DE FUNCIONES (AUTOLOAD)
# Directorio donde Zsh localiza funciones y las carga bajo demanda.
fpath=(
    $ZSH_CONF/funcs
    $fpath
)
autoload -Uz $ZSH_CONF/funcs/*(.N:t)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# AUTO COMPLETADO
# Este cÃ³digo verifica si necesita reconstruir el cachÃ© de completado (.zcompdump):
# 1. Si .zcompdump no existe o es mÃ¡s antiguo que .zshrc:
#    - Se carga compinit con seguridad (-Uz)
#    - Se inicializa el sistema ignorando archivos inseguros (-i)
# 2. Si .zcompdump existe y es mÃ¡s reciente que .zshrc:
#    - Se usa el cachÃ© existente (-C) para una carga mÃ¡s rÃ¡pida
#    - Omite las verificaciones de seguridad para mejor rendimiento
#
# Esto asegura que el sistema de completado siempre estÃ© sincronizado con
# tus configuraciones actuales en .zshrc
#
autoload -Uz compinit

if [[ ! -f ~/.zcompdump || ~/.zcompdump -ot ~/.zshrc ]]; then
    # ReconstrucciÃ³n del cachÃ© (ignora advertencias de seguridad)
    compinit -i
else
    # Uso del cachÃ© existente para carga rÃ¡pida
    compinit -C
fi

# Registro de Zinit en el sistema de completado
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
#   ConfiguraciÃ³n de TERM para habilitar
#   pre visualizaciÃ³n de imÃ¡genes en Ranger segÃºn la terminal
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# Se verifica si la sesiÃ³n actual corresponde a Kitty.
# La variable KITTY_WINDOW_ID es proporcionada automÃ¡ticamente por Kitty
# y contiene un identificador Ãºnico de la ventana.
# Se usa para que aplicaciones como ranger puedan determinar
# que el protocolo de imÃ¡genes de Kitty puede ser empleado.
#
if [[ "$KITTY_WINDOW_ID" != "" ]]; then
    # Si se estÃ¡ en Kitty, se ajusta TERM a xterm-kitty.
    # Esto es obligatorio para que ranger reconozca la terminal
    # y se puedan mostrar pre visualizaciones de imÃ¡genes.
    export TERM="xterm-kitty"
else
    # Para cualquier otra terminal (alacritty, gnome-terminal, etc.)
    # se utiliza xterm-256color para mantener soporte completo de colores.
    export TERM="xterm-256color"
fi
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# â–„â–€â–€â–€â–€ â–ˆâ–€â–€â–€â–€ â–€â–€â–ˆâ–€â–€ â–€â–€â–ˆâ–€â–€ â–€â–€â–ˆâ–€â–€ â–ˆâ–„  â–ˆ â–„â–€â–€â–€â–€ â–„â–€â–€â–€â–€
#  â–€â–€â–€â–„ â–ˆâ–€â–€     â–ˆ     â–ˆ     â–ˆ   â–ˆ â–€â–„â–ˆ â–ˆ â–€â–€â–ˆ  â–€â–€â–€â–„
# â–€â–€â–€â–€  â–€â–€â–€â–€â–€   â–€     â–€   â–€â–€â–€â–€â–€ â–€   â–€  â–€â–€â–€  â–€â–€â–€â–€
# VARIABLES DE ENTORNO

# Idioma y codificaciÃ³n (comentado porque generÃ³ error en Arch)
# export LC_ALL="en_US.UTF-8"

# RANGER
# â”€[ RANGER ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Desactiva la carga de ajustes predeterminado para rc.conf
export RANGER_LOAD_DEFAULT_RC=FALSE

# â”€[ USER AGENT ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Personalizado para scripts o utilidades
export IXOS_USER_AGENT="Mozilla/5.0 (X11; Linux x86_64; rv:105.0) Gecko/20100101 Firefox/105.0"

# â”€[ EDITORES ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Definen el editor por defecto para terminal y GUI
export EDITOR="nvim"
export VISUAL="nvim"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# â–„â–€â–€â–€â–€ â–„â–€â–€â–€â–„ â–ˆ     â–„â–€â–€â–€â–„ â–ˆâ–€â–€â–€â–„ â–„â–€â–€â–€â–€
# â–ˆ     â–ˆ   â–ˆ â–ˆ     â–ˆ   â–ˆ â–ˆâ–€â–€â–€â–„  â–€â–€â–€â–„
#  â–€â–€â–€â–€  â–€â–€â–€  â–€â–€â–€â–€â–€  â–€â–€â–€  â–€   â–€ â–€â–€â–€â–€
#
# â”€[ COLORES PARA BAT ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export BAT_STYLE="full"
export BAT_THEME="base16"   # Tema de colores compatible con kitty

# â”€[ COLORES PARA LS ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# export LS_COLORS="*.zip=36:*.rar=36:*.tar=36:*.gz=36:*.tar.gz=36:*.7z=36:$LS_COLORS"
# export LS_COLORS="ex=30;42"               # Ejecutables con fondo verde
export LS_COLORS="$(vivid generate kasumi)"

# â”€[ COLORES PARA GREP ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# PEND: Resalta en negrita y amarillo las bÃºsquedas con grep
# export GREP_COLORS="mt=1;33"

# â”€[ COLORES PARA LESS ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Primero tienes que instalar: 'source-highlight'
# Coloco Ãºnicamente el nombre, sino sirve, prueba con la ruta
# export LESSOPEN="| /usr/bin/src-hilite-lesspipe.sh %s"
export LESSOPEN="| src-hilite-lesspipe.sh %s"

# Opciones globales para less
#   -M prompt,    -F quit-if-one-screen,
#   -R ANSI,      -I ignore-case
export LESS='-MRFI'

# â”€[ COLORES PARA MAN ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Define el paginador para man (MANPAGER) usando less con:
# - Soporte completo para colores/ANSI (-R + --use-color)
# - Prompt mÃ¡s legible y con info (-M)
# - CompresiÃ³n de lÃ­neas en blanco (-s)
# - Carga total del documento al abrir (+Gg) â†’ scroll suave y porcentaje exacto desde el inicio
export MANPAGER='less -M +Gg -R --use-color'

# Asegura que groff use SGR (necesario para -R)
export MANROFFOPT='-c'

# PersonalizaciÃ³n de colores para man pages (y less en general)
# Usa tput para mÃ¡xima compatibilidad (mejor que secuencias \e hardcoded)
export LESS_TERMCAP_mb=$(tput bold; tput setaf 3)      # Inicio de parpadeo (blinking) â†’ amarillo bold (poco usado en man, pero resalta warnings)
export LESS_TERMCAP_md=$(tput bold; tput setaf 6)      # Inicio de negrita â†’ cyan bold (ideal para tÃ­tulos, comandos y secciones)
export LESS_TERMCAP_me=$(tput sgr0)                    # Fin de todos los modos (reset a normal)
export LESS_TERMCAP_so=$(tput bold; tput setaf 3)      # Highlight de bÃºsqueda / standout â†’ amarillo bold (mejor contraste que blanco en fondos oscuros)
export LESS_TERMCAP_se=$(tput sgr0)                    # Fin de standout
export LESS_TERMCAP_us=$(tput smul; tput setaf 2)      # Inicio de subrayado â†’ verde (clÃ¡sico para opciones, flags y argumentos)
export LESS_TERMCAP_ue=$(tput rmul; tput sgr0)         # Fin de subrayado (rmul es mÃ¡s preciso que sgr0 solo)

# ------------------------------------------------------
# â–ˆâ–€â–€â–€â–€ â–€â–€â–€â–€â–ˆ â–ˆâ–€â–€â–€â–€
# â–ˆâ–€â–€   â–„â–€â–€â–€  â–ˆâ–€â–€
# â–€     â–€â–€â–€â–€â–€ â–€
# OPCIONES GENERALES DE FZF

# Generador de TEMAS para fzf
# https://vitormv.github.io/fzf-themes/

# ParÃ¡metros globales de fzf: controlan colores,
# diseÃ±o y comportamiento por defecto
export FZF_DEFAULT_OPTS="--layout=reverse"   # El prompt se abre desde arriba
export FZF_DEFAULT_OPTS=$FZF_DEFAULT_OPTS'
  --color=fg:#818F98,fg+:#C8D0D6,bg:-1,bg+:#333C42
  --color=hl:#A88E6B,hl+:#FBC06E,info:#94B8BC,marker:#FF62E0
  --color=prompt:#AFEEAE,spinner:#EA676D,pointer:#FBC06E,header:#87AFAF
  --color=border:#5E6A72,label:#5E6A72,query:#D8DEE2
  --border="sharp"
  --border-label="( ó±‹ )"
  --preview-window="sharp"
  --prompt="ó°˜§ "
  --info=right
  --marker="â€º"
  --pointer="â–’"
  --separator="â”€"
  --scrollbar="â–"
' # Fin de linea

# Alt+C (cambio de directorio)
# export FZF_ALT_C_OPTS="--preview 'eza --tree --color=always {} | head -200'"

# Ctrl+T (bÃºsqueda de archivos)
export FZF_CTRL_T_OPTS="--preview 'bat -n --color=always --line-range :500 {}'"

# ------------------------------------------------------
# â–ˆ   â–ˆ â–€â–€â–ˆâ–€â–€ â–„â–€â–€â–€â–€ â–€â–€â–ˆâ–€â–€ â–„â–€â–€â–€â–„ â–ˆâ–€â–€â–€â–„ â–ˆ   â–ˆ
# â–ˆâ–€â–€â–€â–ˆ   â–ˆ    â–€â–€â–€â–„   â–ˆ   â–ˆ   â–ˆ â–ˆâ–€â–€â–€â–„ â–€â–€â–€â–€â–ˆ
# â–€   â–€ â–€â–€â–€â–€â–€ â–€â–€â–€â–€    â–€    â–€â–€â–€  â–€   â–€ â–€â–€â–€â–€â–€
# COMMAND CONFIGURATION
# Puedes revisar las opciones activas con el comando: set -o
# https://zsh.sourceforge.io/Doc/Release/Variables-Index.html
# https://zsh.sourceforge.io/Doc/Release/Options.html#History

PROMPT_EOL_MARK="ğŸ™"                # Define el sÃ­mbolo que se mostrarÃ¡ al final de la lÃ­nea de comandos en el prompt.
HISTFILE=~/.cache/zsh_history       # Archivo donde se guarda el historial
HISTSIZE=30000                      # Comandos que se mantienen en memoria
SAVEHIST=30000                      # Comandos que se guardan en disco
setopt APPEND_HISTORY               # Permite que mÃºltiples sesiones de terminal agreguen comandos al historial en lugar de sobrescribirlo.
setopt BANG_HIST                    # Permite tratar el carÃ¡cter '!' de manera especial durante la expansiÃ³n de comandos.
setopt COMPLETE_ALIASES             # Activa la auto completado para alias.
setopt EXTENDED_HISTORY             # Registra la marca de tiempo de cada comando en el archivo de historial en el formato ":inicio:transcurrido;comando".
setopt HIST_ALLOW_CLOBBER           # Permite que las referencias al historial sobrescriban archivos, incluso cuando CLOBBER estÃ¡ desactivado.
setopt HIST_BEEP                    # Emite un pitido cuando se accede a un historial inexistente.
setopt HIST_EXPIRE_DUPS_FIRST       # Elimina comandos duplicados cuando se alcanza el lÃ­mite de $HISTSIZE.
setopt HIST_FIND_NO_DUPS            # Evita encontrar comandos duplicados durante la bÃºsqueda en el historial.
setopt HIST_IGNORE_ALL_DUPS         # Elimina una entrada anterior en el historial si la nueva es un duplicado.
setopt HIST_IGNORE_DUPS             # Ignora comandos duplicados en la lista del historial.
setopt HIST_IGNORE_SPACE            # Ignora comandos que comienzan con un espacio.
setopt HIST_NO_STORE                # No almacena el comando `fc -l` en el historial.
setopt HIST_REDUCE_BLANKS           # Elimina espacios adicionales de cada lÃ­nea de comando antes de agregarla al historial.
setopt HIST_SAVE_NO_DUPS            # Ignora duplicados al guardar el historial en el archivo.
setopt HIST_VERIFY                  # Muestra el comando antes de ejecutarlo si se selecciona del historial.
setopt INC_APPEND_HISTORY           # Escribe en el archivo de historial de inmediato, no solo cuando la shell termina.
setopt NO_HIST_NO_FUNCTIONS         # No elimina definiciones de funciones del historial.
setopt RM_STAR_WAIT                 # Espera 10 segundos antes de ejecutar `rm` con un asterisco (*).
setopt SHARE_HISTORY                # Comparte el historial entre todas las sesiones de terminal.

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
#   FILTRA EL HISTORIAL DE ZSH ANTES DE GUARDARLO.
#   Solo almacena comandos que existen en el sistema
#   y que no coincidan  con los patrones definidos
#   en HISTORY_IGNORE
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Lista de comandos a ignorar
HISTORY_IGNORE="* --help|clear|exa|exit|ls|lsd|man *|pwd|q|ranger|yt-mp3"

# Hook: decidir quÃ© comandos se guardan en el historial
zshaddhistory() {
    local line cmd
    # El comando completo sin salto de lÃ­nea
    line=${1%%$'\n'}
    cmd=${line%% *}
    # 1. Ignorar si el comando no existe
    whence "$cmd" >| /dev/null || return 1
    # 2. Ignorar si coincide con algÃºn patrÃ³n en HISTORY_IGNORE
    [[ $cmd == ${~HISTORY_IGNORE} ]] && return 1
    # 3. Guardar los demÃ¡s
    return 0
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# â–€â–€â–€â–€â–ˆ â–€â–€â–ˆâ–€â–€ â–ˆâ–„  â–ˆ â–€â–€â–ˆâ–€â–€ â–€â–€â–ˆâ–€â–€
# â–„â–€â–€â–€    â–ˆ   â–ˆ â–€â–„â–ˆ   â–ˆ     â–ˆ
# â–€â–€â–€â–€â–€ â–€â–€â–€â–€â–€ â–€   â–€ â–€â–€â–€â–€â–€   â–€
# FAST ZSHELL PLUGIN MANAGER

# Clona de manera superficial para acelerar la carga
# y muestra el prompt con informaciÃ³n completa y personalizable
zinit ice depth"1"
zinit light romkatv/powerlevel10k

# Completa comandos externos y utilidades del sistema
# que Zsh no cubre por defecto, con ligero retraso para no
# bloquear el inicio del shell
zinit ice wait"1" lucid
zinit light zsh-users/zsh-completions

# Interfaz avanzada para la autocompletaciÃ³n con fzf
zinit ice lucid
zinit light Aloxaf/fzf-tab

# Muestra sugerencias basadas en el historial mientras se escribe,
# permitiendo completar con la flecha derecha.
# Inicia automÃ¡ticamente tras la carga del plugin.
zinit ice wait"0" lucid atload"_zsh_autosuggest_start"
zinit light zsh-users/zsh-autosuggestions

# Colorea la sintaxis de los comandos a medida que se escriben.
# Carga al final para no interferir con completados
# ni con las sugerencias de autosugestiÃ³n.
zinit ice wait"0" lucid
zinit light zsh-users/zsh-syntax-highlighting

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# â–„â–€â–€â–€â–€ â–„â–€â–€â–€â–„ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€â–€â–„ â–ˆ     â–ˆâ–€â–€â–€â–€ â–€â–€â–ˆâ–€â–€ â–€â–€â–ˆâ–€â–€ â–„â–€â–€â–€â–„ â–ˆâ–„  â–ˆ
# â–ˆ     â–ˆ   â–ˆ â–ˆ   â–ˆ â–ˆâ–€â–€â–€  â–ˆ     â–ˆâ–€â–€     â–ˆ     â–ˆ   â–ˆ   â–ˆ â–ˆ â–€â–„â–ˆ
#  â–€â–€â–€â–€  â–€â–€â–€  â–€   â–€ â–€     â–€â–€â–€â–€â–€ â–€â–€â–€â–€â–€   â–€   â–€â–€â–€â–€â–€  â–€â–€â–€  â–€   â–€

# NOTA: Para revisar las activas, ejecuta: zstyle -L ':completion:*'

# â”€â”€ AJUSTES DE AUTOCOMPLETADO NATIVO DE ZSH (SIN FZF-TAB) â”€â”€â”€

# Muestra los directorios especiales '.' y '..' en la
# autocompletaciÃ³n de rutas.
# zstyle ':completion:*' special-dirs true

# Agrupa resultados de coincidencias por categorÃ­a (comandos,
# archivos, procesos, etc.) para una visualizaciÃ³n ordenada.
# zstyle ':completion:*:matches' group 'yes'

# Activa navegaciÃ³n por menÃº cuando hay mÃºltiples resultados,
# permitiendo desplazarse con las flechas.
# zstyle ':completion:*' menu select

# Muestra descripciones detalladas de cada Ã­tem del completion
# (por ejemplo: â€œ(archivo)â€, â€œ(directorio)â€, etc.).
# zstyle ':completion:*' verbose yes

# Define el formato para las descripciones mostradas por Zsh.
# %d se reemplaza por la descripciÃ³n del grupo.
# zstyle ':completion:*:descriptions' format '-- %d --'

# Usa los colores definidos en LS_COLORS para colorear los
# elementos listados en el menÃº de completado.
# zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}

# â”€â”€ AJUSTES DE AUTOCOMPLETADO CON FZF-TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Fuerza actualizaciÃ³n automÃ¡tica de comandos reciÃ©n instalados.
zstyle ':completion:*' rehash true

# Coincidencia insensible a mayÃºsculas.
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# Proveedor de lista de procesos (para kill y similares).
zstyle ':completion:*:*:*:*:processes' command 'ps -u $USER -o pid,user,comm,cmd -w -w'

# Habilita los valores por defecto de fzf en fzf-tab. https://github.com/Aloxaf/fzf-tab#configure
zstyle ':fzf-tab:*' use-fzf-default-opts yes

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# â•“
# â•‘ Zoxide: recuerda los directorios mÃ¡s frecuentados
# â•‘ Es como cd, pero utilizando el comando z
# â•‘ Requiere: pacman -S zoxide
# â•™
eval "$(zoxide init zsh)"
# eval "$(zoxide init --cmd cd zsh)"
# â•“
# â•‘ IntegraciÃ³n oficial de fzf
# â•‘ Proporciona bÃºsquedas interactivas y Ctrl+R mejorado
# â•‘ Requiere: pacman -S fzf
# â•™
source <(fzf --zsh)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ’¤ LÃ­neas desactivadas (referencia o pruebas)

# Starship prompt (no en uso actualmente)
# Requiere: pacman -S starship
# eval "$(starship init zsh)"
# https://git.nvds.be/NicolaiVdS/Dotfiles/src/commit/66cf71c398c811521d1959c0dbdd19213e2e73ef/.zshrc
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Cargar configuraciÃ³n de Powerlevel10k (si existe)
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# Coloca esto al final de tu ~/.zshrc
zprof
